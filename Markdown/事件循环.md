# 事件循环

在大多数浏览器中，每个浏览器选项卡都有一个事件循环，以使每个进程都隔离开，并避免使用无限的循环或繁重的处理来阻止整个浏览器页面。

## 阻塞事件循环

js中几乎所有的I/O基于都是非阻塞的。网络请求，文件系统操作等。被阻塞是个异常，这就是js中为什么很多基于回调的原因。

## 调用堆栈

调用堆栈是一个LIFO队列（先进后出，后进先出）。

## 消息队列

当调用setIimeout()时，浏览器或Node.js会启动定时器，当定时器到期时，则回调函数会被放入‘消息队列’中。

事件循环会赋予调用堆栈优先级，它首先处理在调用堆栈中找到的所有东西，一旦其中没有任何东西，便开始处理消息队列中的东西。

## ES6作业队列

ES6中引入了作业队列的概念，Promise使用了该队列。这种方式会尽快地执行异步函数结果，而不是放在调用堆栈dd额末尾。

在当前函数结束之前resolve的Promise会在当前函数之后立即执行。这是Promise（以及基于promise的async/asait）与通过setTimeout()或者其他平台API的普通的旧异步函数之间的巨大区别。